!function(t){var e={};function i(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);class n{constructor(){this._openedItems=0,this._unhandledItems=216}canBeGameSolved(t,e,i){return this.getSolution(t,e,i),36==this._openedItems}getOpenedItemsCount(){return this._openedItems}getIntermediateResult(){return this._result}getSolution(t,e,i){this.resetResult();for(var n=0;n<i.length;++n)this._result[i[n][0]][i[n][1]]=i[n][2];this.calculateOpenedAndUnhandledItems();for(var s=-1,r=-1;36!=this._openedItems&&(s!=this._openedItems||r!=this._unhandledItems);)s=this._openedItems,r=this._unhandledItems,this.handleResult(),this.calculateByVConditions(t),this.calculateByHConditions(e),this.calculateOpenedAndUnhandledItems();return this._result}resetResult(){this._result=[];for(var t=0;t<6;++t){this._result[t]=[];for(var e=0;e<6;++e)this._result[t][e]=[0,1,2,3,4,5]}}calculateOpenedAndUnhandledItems(){this._openedItems=0,this._unhandledItems=0;for(var t=0;t<6;++t)for(var e=0;e<6;++e)Array.isArray(this._result[t][e])?this._unhandledItems+=this._result[t][e].length:++this._openedItems}handleResult(){this.hideOpenedImages(),this.openUniqueInRow(),this.openSingle()}hideOpenedImages(){for(var t=0;t<6;++t)for(var e=0;e<6;++e)if(!Array.isArray(this._result[t][e]))for(var i=this.getColumn(this._result[t][e]),n=0;n<6;++n)this.removeItemfromObject(i,this._result[t][n])}openUniqueInRow(){for(var t=0;t<6;++t){for(var e=0,i=0,n=0,s=0,r=0,a=0,o=-1,h=-1,d=-1,l=-1,m=-1,c=-1,g=0;g<6;++g)Array.isArray(this._result[t][g])&&(-1!=this._result[t][g].indexOf(0)&&(++e,o=g),-1!=this._result[t][g].indexOf(1)&&(++i,h=g),-1!=this._result[t][g].indexOf(2)&&(++n,d=g),-1!=this._result[t][g].indexOf(3)&&(++s,l=g),-1!=this._result[t][g].indexOf(4)&&(++r,m=g),-1!=this._result[t][g].indexOf(5)&&(++a,c=g));1==e&&(this._result[t][o]=10*t),1==i&&(this._result[t][h]=10*t+1),1==n&&(this._result[t][d]=10*t+2),1==s&&(this._result[t][l]=10*t+3),1==r&&(this._result[t][m]=10*t+4),1==a&&(this._result[t][c]=10*t+5)}}openSingle(){for(var t=0;t<6;++t)for(var e=0;e<6;++e)Array.isArray(this._result[t][e])&&1==this._result[t][e].length&&(this._result[t][e]=10*t+this._result[t][e][0])}calculateByVConditions(t){for(var e=0;e<t.length;++e)this.handleVCondition(t[e])}handleVCondition(t){0==t[0]?(this.handlePositiveVerticalCondition(t[1],t[2]),this.handlePositiveVerticalCondition(t[2],t[1])):(this.handleNegariveVCondition(t[1],t[2]),this.handleNegariveVCondition(t[2],t[1]))}handlePositiveVerticalCondition(t,e){var i=this.getRow(t),n=this.getRow(e),s=this._result[i].indexOf(t),r=(this.getColumn(t),this.getColumn(e));if(-1!=s)this._result[n][s]=e;else for(var a=0;a<6;++a)this.objectContainsItem(this._result[i][a],t)||this.removeItemfromObject(r,this._result[n][a])}handleNegariveVCondition(t,e){var i=this.getRow(t),n=this.getRow(e),s=this.getColumn(e),r=this._result[i].indexOf(t);-1!=r&&this.removeItemfromObject(s,this._result[n][r])}calculateByHConditions(t){for(var e=0;e<t.length;++e)this.handleHCondition(t[e])}handleHCondition(t){0==t[0]&&0==t[1]&&this.handlePositiveHConditionWithoutArrow(t[2],t[3]),0==t[0]&&1==t[1]&&(this.handleNegativeHConditionWothoutArrow(t[2],t[3]),this.handleNegativeHConditionWothoutArrow(t[3],t[2])),1==t[0]&&(this.handleHConditionWithArrow(0==t[1],t[2],t[3],t[4]),this.handleHConditionWithArrow(0==t[1],t[4],t[3],t[2]),0==t[1]?this.handlehHConditionWithArrowAndPositiveCenter(t[2],t[3],t[4]):1==t[1]&&this.handleHConditionWithArrowAndNegativeCenter(t[2],t[3],t[4])),2==t[1]&&this.handleHConditionWithDots(t[2],t[4])}handleHConditionWithArrow(t,e,i,n){var s=this.getRow(e),r=this.getRow(i),a=this.getRow(n),o=this.getColumn(e),h=this.getColumn(i),d=(this.getColumn(n),this._result[s].indexOf(e));if(-1!=d)d<2?(t?this._result[r][d+1]=i:this.removeItemfromObject(h,this._result[r][d+1]),this._result[a][d+2]=n):d>3&&(t?this._result[r][d-1]=i:this.removeItemfromObject(h,this._result[r][d-1]),this._result[a][d-2]=n);else for(var l=0;l<6;++l){var m=!0,c=!0;l<4?(t&&!this.objectContainsItem(this._result[r][l+1],i)&&(m=!1),t||this._result[r][l+1]!=i||(m=!1),this.objectContainsItem(this._result[a][l+2],n)||(m=!1)):m=!1,l>1?(t&&!this.objectContainsItem(this._result[r][l-1],i)&&(c=!1),t||this._result[r][l-1]!=i||(c=!1),this.objectContainsItem(this._result[a][l-2],n)||(c=!1)):c=!1,c||m||this.removeItemfromObject(o,this._result[s][l])}}handlehHConditionWithArrowAndPositiveCenter(t,e,i){var n=this.getRow(t),s=this.getRow(e),r=this.getRow(i),a=this.getColumn(t),o=this.getColumn(e),h=this.getColumn(i),d=this._result[s].indexOf(e);if(-1!=d)for(var l=0;l<6;++l)l!=d-1&&l!=d+1&&(this.removeItemfromObject(a,this._result[n][l]),this.removeItemfromObject(h,this._result[r][l]));else{this.removeItemfromObject(o,this._result[s][0]),this.removeItemfromObject(o,this._result[s][5]);for(var m=1;m<5;++m)(this.objectContainsItem(this._result[n][m-1],t)||this.objectContainsItem(this._result[r][m-1],i))&&(this.objectContainsItem(this._result[n][m+1],t)||this.objectContainsItem(this._result[r][m+1],i))||this.removeItemfromObject(o,this._result[s][m])}}handleHConditionWithArrowAndNegativeCenter(t,e,i){var n=this.getRow(t),s=this.getRow(e),r=this.getRow(i),a=this.getColumn(t),o=this.getColumn(i),h=this._result[s].indexOf(e);-1!=h&&(1==h||2==h?(this.removeItemfromObject(a,this._result[n][h-1]),this.removeItemfromObject(o,this._result[r][h-1])):3!=h&&4!=h||(this.removeItemfromObject(a,this._result[n][h+1]),this.removeItemfromObject(o,this._result[r][h+1])))}handlePositiveHConditionWithoutArrow(t,e){this.handleFirstItemNearOther(t,e),this.handleFirstItemNearOther(e,t)}handleFirstItemNearOther(t,e){var i=this.getRow(t),n=this.getRow(e),s=this.getColumn(t),r=this.getColumn(e),a=this._result[i].indexOf(t);if(-1!=a)for(var o=0;o<6;++o)o!=a-1&&o!=a+1&&this.removeItemfromObject(r,this._result[n][o]);else{(Array.isArray(this._result[n][1])&&-1==this._result[n][1].indexOf(r)||!Array.isArray(this._result[n][1])&&this._result[n][1]!=e)&&this.removeItemfromObject(s,this._result[i][0]),(Array.isArray(this._result[n][4])&&-1==this._result[n][4].indexOf(r)||!Array.isArray(this._result[n][4])&&this._result[n][4]!=e)&&this.removeItemfromObject(s,this._result[i][5]);for(var h=1;h<5;++h)(Array.isArray(this._result[n][h-1])&&-1==this._result[n][h-1].indexOf(r)||!Array.isArray(this._result[n][h-1])&&this._result[n][h-1]!=e)&&(Array.isArray(this._result[n][h+1])&&-1==this._result[n][h+1].indexOf(r)||!Array.isArray(this._result[n][h+1])&&this._result[n][h+1]!=e)&&this.removeItemfromObject(s,this._result[i][h])}}handleHConditionWithDots(t,e){for(var i=this.findFirsColumnWithItem(t),n=this.findLastColumnWithItem(e),s=this.getColumn(t),r=this.getColumn(e),a=this.getRow(t),o=this.getRow(e),h=0;h<=i;++h)this.removeItemfromObject(r,this._result[o][h]);for(var d=5;d>=n;--d)this.removeItemfromObject(s,this._result[a][d])}handleNegativeHConditionWothoutArrow(t,e){var i=this.getRow(t),n=this.getRow(e),s=this.getColumn(e),r=this._result[i].indexOf(t);-1!=r&&(r>0&&this.removeItemfromObject(s,this._result[n][r-1]),r<5&&this.removeItemfromObject(s,this._result[n][r+1]))}findFirsColumnWithItem(t){for(var e=this.getRow(t),i=0;i<6;++i)if(this.objectContainsItem(this._result[e][i],t))return i;return-1}findLastColumnWithItem(t){for(var e=this.getRow(t),i=5;i>=0;--i)if(this.objectContainsItem(this._result[e][i],t))return i;return-1}removeItemfromObject(t,e){if(Array.isArray(e)){var i=e.indexOf(t);-1!=i&&e.splice(i,1)}}objectContainsItem(t,e){return Array.isArray(t)?-1!=t.indexOf(this.getColumn(e)):t==e}getRow(t){return Math.floor(t/10)}getColumn(t){return t-10*this.getRow(t)}}class s{constructor(t,e,i,n){this._matrix=t,this._imagesOpenedOnStart=e,this._verticalConditions=i,this._horizontalConditions=n}getItemsOpenedOnStart(){return this._imagesOpenedOnStart}getSolution(){return this._matrix}getVerticalConditions(){return this._verticalConditions}getHorizontalCondition(){return this._horizontalConditions}}class r{constructor(){}generateGame(t){window.MathUtil.seedRandom(t),this._itemsOpenedOnStart=new Array,this._verticalConditions=new Array,this._horizontalConditions=new Array,this._gameSolution=this.generateGameSolution();var e=new n;for(e.getSolution(this._verticalConditions,this._horizontalConditions,this._itemsOpenedOnStart),this._intermedaiteResult=e.getIntermediateResult(),this.openRandomItems();!e.canBeGameSolved(this._verticalConditions,this._horizontalConditions,this._itemsOpenedOnStart);)this.generateCondition();for(this.removeUnnecessaryConditions(this._verticalConditions),this.removeUnnecessaryConditions(this._horizontalConditions);this._verticalConditions.length>18||this._horizontalConditions.length>21;)for(this._verticalConditions.length>18&&this._verticalConditions.splice(this.getRandom(this._verticalConditions.length-1),1),this._horizontalConditions.length>21&&this._horizontalConditions.splice(this.getRandom(this._horizontalConditions.length-1),1);!e.canBeGameSolved(this._verticalConditions,this._horizontalConditions,this._itemsOpenedOnStart);)this._intermedaiteResult=e.getIntermediateResult(),this.openItem();return this.removeUnnecessaryConditions(this._verticalConditions),this.removeUnnecessaryConditions(this._horizontalConditions),new s(this._gameSolution,this._itemsOpenedOnStart,this._verticalConditions,this._horizontalConditions)}openRandomItems(){this.openItem(this.getRandom(3))}removeUnnecessaryConditions(t){for(var e=new n,i=0;i<t.length;++i){var s=t.splice(i,1);e.canBeGameSolved(this._verticalConditions,this._horizontalConditions,this._itemsOpenedOnStart)?--i:t.splice(i,0,s[0])}}generateGameSolution(){for(var t=new Array(6),e=0;e<6;++e){t[e]=new Array(6);for(var i=[0,1,2,3,4,5],n=0;n<6;++n){var s=this.getRandom(i.length-1);t[e][n]=10*e+i[s],i.splice(s,1)}}return t}generateCondition(){0==this.getRandom(2)?this.generateVerticalCondition():this.generateHorizontalCondition()}generateVerticalCondition(){var t=new Array(3),e=this.getRandom(6),i=this.getRandom(5),n=[0,1,2,3,4,5];n.splice(i,1);var s=n[this.getRandom(4)],r=this.getRandom(5);if(t[1]=this._gameSolution[Math.min(i,s)][r],e>0)t[0]=0,t[2]=this._gameSolution[Math.max(i,s)][r];else{t[0]=1,n=[0,1,2,3,4,5];var a=this._gameSolution[Math.max(i,s)][r]%10;n.splice(a,1),t[2]=10*Math.max(i,s)+n[this.getRandom(4)]}this._verticalConditions.push(t)}generateHorizontalCondition(){var t=this.getRandom(9);0==t?this.generatehConditionWithDots():t<4?this.generateHConditionWithArrow():this.generateHConditionWithoutArrow()}generateHConditionWithArrow(){var t=new Array(5);t[0]=1,t[1]=this.getRandom(1);var e,i=this.getRandom(5),n=this.getRandom(5),s=this.getRandom(5),r=this.getRandom(5);t[2]=this._gameSolution[i][r];var a=[];if(r>=2&&a.push("left"),r<=3&&a.push("right"),"left"==a[this.getRandom(a.length-1)]?(t[4]=this._gameSolution[s][r-2],e=r-1):(t[4]=this._gameSolution[s][r+2],e=r+1),0==t[1])t[3]=this._gameSolution[n][e];else{a=[];for(var o=0;o<6;++o)o!=e&&a.push(this._gameSolution[n][o]);t[3]=a[this.getRandom(a.length-1)]}this._horizontalConditions.push(t)}generateHConditionWithoutArrow(){var t=this.getRandom(5),e=this.getRandom(5),i=this.getRandom(5),n=this.getRandom(2),s=new Array(5);s[0]=0,s[2]=s[4]=this._gameSolution[t][i];var r=[];if(0==n){s[1]=1;for(var a=0;a<6;++a)a!=i-1&&a!=i+1&&r.push(this._gameSolution[e][a]);s[3]=r[this.getRandom(r.length-1)]}else s[1]=0,i>0&&r.push(this._gameSolution[e][i-1]),i<5&&r.push(this._gameSolution[e][i+1]),1==r.length?s[3]=r[0]:s[3]=r[this.getRandom(1)];this._horizontalConditions.push(s)}generatehConditionWithDots(){var t=this.getRandom(5),e=this.getRandom(5),i=this.getRandom(4),n=new Array(5);n[0]=0,n[1]=2,n[2]=this._gameSolution[t][i],n[3]=-1;for(var s=[],r=i+1;r<6;++r)s.push(this._gameSolution[e][r]);n[4]=s[this.getRandom(s.length-1)],this._horizontalConditions.push(n)}openItem(t){null==t&&(t=1);for(var e=[],i=0;i<6;++i)for(var n=0;n<6;++n)Array.isArray(this._intermedaiteResult[i][n])&&e.push([i,n,this._gameSolution[i][n]]);for(var s=0;s<t;++s){var r=this.getRandom(e.length-1);this._itemsOpenedOnStart.push(e[r]),e.splice(r,1)}}getRandom(t){return Math.round(window.MathUtil.random(t))}}var a=i.p+"85e597cd40aba7f6b62a006dafb8fdd4.jpg",o=i.p+"04548d5f240a547d522046c35a9e6ff1.jpg",h=i.p+"46dcc7b89daa2d9a74ea720c69f07854.jpg",d=i.p+"668317b36710889bf670007bd70a286e.jpg",l=i.p+"9009ba085b14c2510fadb0afc061e535.jpg",m=i.p+"ce742f2aed2cf1ffa709fe661dad45ff.jpg",c=i.p+"18631aad8604ede013c669d95c3bc398.jpg",g=i.p+"2ef1bc72a8505a3122bb0795773a530b.jpg",u=i.p+"1ac75190116b0010d5ebd1771c06248d.jpg",C=i.p+"f6c0108d67b54d3234ce1bf0c7b8bc61.jpg",p=i.p+"e1d723a491b41a1fae42a81419784f6e.jpg",v=i.p+"646e8a52ced510232e12f6893c0bb5d3.jpg",f=i.p+"27097340479eb8d277b2d6e6cdde01c5.jpg",b=i.p+"3a2a940efd08b921546a941c29e89768.jpg",I=i.p+"8968669c28bc758214578d0c26b9956d.jpg",y=i.p+"c8d68476642ac688face6adf05bde4ce.jpg",_=i.p+"fbb270e266187c1b86e4456a919448a3.jpg",E=i.p+"c6fc2086b5c6ff67c8f17bdc96bd3d78.jpg",S=i.p+"a222e692e3f99fbcb2a50bd7f618d090.jpg",w=i.p+"292419e1476bb8cf293fa38a19677a94.jpg",O=i.p+"4537891924c5a3b1c3e3b34b2e33e491.jpg",R=i.p+"762003d0d85ebaec9df3c835f03df30a.jpg",j=i.p+"81a09491a6ffd078a050344fc47a73c3.jpg",x=i.p+"657b6ef418bd744815ec6525a41b56ff.jpg",A=i.p+"d4c2c0b25438fdde35e51724f1938cd6.jpg",H=i.p+"9b7998133fac01de8a6200519165bd5e.jpg",T=i.p+"b82b540bf690dd3fb30ae68dcd896afd.jpg",M=i.p+"3aa06113ae4ce4e13b3c86e7f5845c9b.jpg",N=i.p+"798f4d7b2bbef468450cfa75b5f7ace1.jpg",L=i.p+"95db87e6e51d0a9fda60350f8add8e16.jpg",z=i.p+"41a9a7783328104935067e85aa3e1581.jpg",D=i.p+"18616f3e2d1897ab1e358c2df93aa3da.jpg",B=i.p+"f02a8d049e69c8b7565dad3abb67b60e.jpg",k=i.p+"d83911d999aa6cbcc1f3974634dd360f.jpg",W=i.p+"b5b00794b4d8b0234d7f9d8b4f1efe0e.jpg",V=i.p+"d8300a76ce51b30cb1132c2389707548.jpg";const U=[[a,o,h,d,l,m],[c,g,u,C,p,v],[f,b,I,y,_,E],[S,w,O,R,j,x],[A,H,T,M,N,L],[z,D,B,k,W,V]];class F extends EventTarget{constructor(){super()}render(t,e){this.parent=t,this.images=[],this.table=e.createElement("div"),this.table.addEventListener("contextmenu",this.onContextMenu),this.parent.style.backgroundColor="000000",this.table.style.backgroundColor="000000",this.tr1=e.createElement("div"),this.selectedImage=e.createElement("img"),this.image0=e.createElement("img"),this.image0.src=this.getImage0Src(),this.styleImage(this.image0),this.image1=e.createElement("img"),this.image1.src=this.getImage1Src(),this.styleImage(this.image1),this.image2=e.createElement("img"),this.image2.src=this.getImage2Src(),this.styleImage(this.image2),this.tr1.appendChild(this.image0),this.tr1.appendChild(this.image1),this.tr1.appendChild(this.image2),this.table.appendChild(this.tr1),this.tr2=e.createElement("div"),this.image3=e.createElement("img"),this.image3.src=this.getImage3Src(),this.styleImage(this.image3),this.image4=e.createElement("img"),this.image4.src=this.getImage4Src(),this.styleImage(this.image4),this.image5=e.createElement("img"),this.image5.src=this.getImage5Src(),this.styleImage(this.image5),this.tr2.appendChild(this.image3),this.tr2.appendChild(this.image4),this.tr2.appendChild(this.image5),this.table.appendChild(this.tr2),t.appendChild(this.table)}selectImage(t){return this.parent.removeChild(this.table),this.selectedImage.src=t,this.selectedImage.style.width="65%",this.parent.appendChild(this.selectedImage),this.selectedImage.src}unselectImage(){this.parent.removeChild(this.selectedImage),this.parent.appendChild(this.table)}removeImage(t){for(var e=!1,i=0;i<6;++i)this.images[i].src==t&&("hidden"!=this.images[i].style.visibility&&(e=!0),this.images[i].style.visibility="hidden");return e}unremoveImage(t){for(var e=0;e<6;++e)this.images[e].src==t&&(this.images[e].style.visibility="visible")}styleImage(t){t.style.width="33%",t.parentCell=this,this.images.push(t),t.addEventListener("contextmenu",this.onContextMenu),t.addEventListener("mousedown",(function(t){1==t.which&&(t.target.parentCell.selectImage(t.target.src),t.target.parentCell.dispatchEvent(new CustomEvent("imageselected",{detail:t.target.src}))),3==t.which&&(t.target.style.visibility="hidden",t.target.parentCell.dispatchEvent(new CustomEvent("imageHidden",{detail:t.target})))}))}onContextMenu(t){t.preventDefault()}}class P extends F{constructor(){super()}getImage0Src(){return a}getImage1Src(){return o}getImage2Src(){return h}getImage3Src(){return d}getImage4Src(){return l}getImage5Src(){return m}}class q extends F{constructor(){super()}getImage0Src(){return c}getImage1Src(){return g}getImage2Src(){return u}getImage3Src(){return C}getImage4Src(){return p}getImage5Src(){return v}}class G extends F{constructor(){super()}getImage0Src(){return f}getImage1Src(){return b}getImage2Src(){return I}getImage3Src(){return y}getImage4Src(){return _}getImage5Src(){return E}}class Z extends F{constructor(){super()}getImage0Src(){return S}getImage1Src(){return w}getImage2Src(){return O}getImage3Src(){return R}getImage4Src(){return j}getImage5Src(){return x}}class Y extends F{constructor(){super()}getImage0Src(){return A}getImage1Src(){return H}getImage2Src(){return T}getImage3Src(){return M}getImage4Src(){return N}getImage5Src(){return L}}class J extends F{constructor(){super()}getImage0Src(){return z}getImage1Src(){return D}getImage2Src(){return B}getImage3Src(){return k}getImage4Src(){return W}getImage5Src(){return V}}class K extends EventTarget{render(t,e,i){this.game=i,this.cells=[[],[],[],[],[],[]],this.table=e.createElement("table"),this.table.width="52%",this.table.style.tableLayout="fixed",this.table.style.backgroundColor="fefefe",this.tr0=e.createElement("tr");for(var n=0;n<6;++n)this.addPersonCell(this.tr0,e);this.table.appendChild(this.tr0),this.tr1=e.createElement("tr");for(n=0;n<6;++n)this.addHouseCell(this.tr1,e);this.table.appendChild(this.tr1),this.tr2=e.createElement("tr");for(n=0;n<6;++n)this.addNumberCell(this.tr2,e);this.table.appendChild(this.tr2),this.tr3=e.createElement("tr");for(n=0;n<6;++n)this.addFruitCell(this.tr3,e);this.table.appendChild(this.tr3),this.tr4=e.createElement("tr");for(n=0;n<6;++n)this.addTransportCell(this.tr4,e);this.table.appendChild(this.tr4),this.tr5=e.createElement("tr");for(n=0;n<6;++n)this.addCharCell(this.tr5,e);this.table.appendChild(this.tr5),t.appendChild(this.table),this.imageNumMap=new Map;for(n=0;n<U.length;++n)for(var s=10*n,r=0;r<U[n].length;++r)this.imageNumMap.set(U[n][r],s+r)}unselectImage(t){for(var e=0;e<t.hiddenImages.length;++e)this.cells[t.row][t.hiddenImages[e]].unremoveImage(t.imageSrc);t.cell.unselectImage()}selectImage(t,e){var i=Math.floor(t/10),n=U[i][t%10];n=this.cells[i][e].selectImage(n),this.onImageSelected(i,n,this.cells[i][e])}onImageSelected(t,e,i){for(var n=[],s=0;s<6;++s)this.cells[t][s].removeImage(e)&&n.push(s);var r=new Event("imageSelected");r.hiddenImages=n,r.row=t,r.imageSrc=e,r.cell=i,this.dispatchEvent(r)}onImageHidden(t){var e=new Event(t.type);e.detail=t.detail,this.dispatchEvent(e)}getSelectedImageNum(t,e){var i=this.cells[t][e].selectedImage.src.split("/");return this.imageNumMap.get(i[i.length-1])}addPersonCell(t,e){var i=new P;i.mainBoard=this,this.cells[0].push(i);var n=e.createElement("td");i.render(n,e),i.addEventListener("imageselected",(function(t){t.target.mainBoard.onImageSelected(0,t.detail,this)})),i.addEventListener("imageHidden",(function(t){t.target.mainBoard.onImageHidden(t)})),t.appendChild(n)}addHouseCell(t,e){var i=new q;i.mainBoard=this,this.cells[1].push(i);var n=e.createElement("td");i.render(n,e),i.addEventListener("imageselected",(function(t){t.target.mainBoard.onImageSelected(1,t.detail,this)})),i.addEventListener("imageHidden",(function(t){t.target.mainBoard.onImageHidden(t)})),t.appendChild(n)}addNumberCell(t,e){var i=new G;i.mainBoard=this,this.cells[2].push(i);var n=e.createElement("td");i.render(n,e),i.addEventListener("imageselected",(function(t){t.target.mainBoard.onImageSelected(2,t.detail,this)})),i.addEventListener("imageHidden",(function(t){t.target.mainBoard.onImageHidden(t)})),t.appendChild(n)}addFruitCell(t,e){var i=new Z;i.mainBoard=this,this.cells[3].push(i);var n=e.createElement("td");i.render(n,e),i.addEventListener("imageselected",(function(t){t.target.mainBoard.onImageSelected(3,t.detail,this)})),i.addEventListener("imageHidden",(function(t){t.target.mainBoard.onImageHidden(t)})),t.appendChild(n)}addTransportCell(t,e){var i=new Y;i.mainBoard=this,this.cells[4].push(i);var n=e.createElement("td");i.render(n,e),i.addEventListener("imageselected",(function(t){t.target.mainBoard.onImageSelected(4,t.detail,this)})),i.addEventListener("imageHidden",(function(t){t.target.mainBoard.onImageHidden(t)})),t.appendChild(n)}addCharCell(t,e){var i=new J;i.mainBoard=this,this.cells[5].push(i);var n=e.createElement("td");i.render(n,e),i.addEventListener("imageselected",(function(t){t.target.mainBoard.onImageSelected(5,t.detail,this)})),i.addEventListener("imageHidden",(function(t){t.target.mainBoard.onImageHidden(t)})),t.appendChild(n)}}var Q=i.p+"dd2b968f0f66a431edfee6df8121ca43.png",X=i.p+"ccab562188b8e83831caca67622d1ae1.jpg",$=i.p+"60a31c117fc464122872a088085bafb2.png",tt=i.p+"fd0b62692dca6b20b0afc348bbb86fb0.jpg",et=i.p+"50d96ff368822f1bb92631c8b3643555.jpg";class it extends EventTarget{render(t,e,i){this.game=i,this.hConditionsCount=0,this.vConditionsCount=0,this.vConditionsTable=e.createElement("table"),this.vConditionsTable.style.width="100%",this.vConditionsTable.style.height="20%",this.vConditionsTable.style.tableLayout="fixed",this.vConditionsTable.style.position="absolute",this.vConditionsTable.style.bottom=0,this.vConditionsTable.style.left=0,this.vConditionsTable.style.backgroundColor="ffffff",this.vConditionsTable.addEventListener("contextmenu",this.onContextMenu),this.tr=e.createElement("tr"),this.tr.style.backgroundColor="000000",this.vConditionsTable.appendChild(this.tr),t.appendChild(this.vConditionsTable),this.hConditionsTable=e.createElement("table"),this.hConditionsTable.style.width="47%",this.hConditionsTable.style.height="70%",this.hConditionsTable.style.tableLayout="fixed",this.hConditionsTable.style.backgroundColor="ffffff",this.hConditionsTable.addEventListener("contextmenu",this.onContextMenu);for(var n=0;n<7;++n){var s=e.createElement("tr");this.hConditionsTable.appendChild(s)}this.hConditionsTable.style.position="absolute",this.hConditionsTable.style.top="0",this.hConditionsTable.style.right="0",t.appendChild(this.hConditionsTable),this.currentRow=0,this.parent=t,this.document=e}onContextMenu(t){t.preventDefault()}addVerticalCondition(t,e,i){var n=this.document.createElement("div");n.parent=this,n.data={isRegular:t,topImageNum:e,bottomImageNum:i},n.data.type="vertical",n.addEventListener("mousedown",this.onMouseDown);var s=this.document.createElement("div"),r=this.document.createElement("div"),a=this.document.createElement("img");a.src=U[Math.floor(e/10)][e%10],a.style.maxWidth="95%",a.addEventListener("contextmenu",this.onContextMenu);var o=this.document.createElement("img");o.src=U[Math.floor(i/10)][i%10],o.style.maxWidth="95%",o.addEventListener("contextmenu",this.onContextMenu),s.appendChild(a),n.appendChild(s),r.appendChild(o),n.appendChild(r);var h=this.document.createElement("td");if(h.style.backgroundImage="url("+tt+")",h.style.backgroundSize="100% 100%",h.appendChild(n),!t){var d=this.document.createElement("img");d.src=Q,d.style.height="50%",d.style.width="100%",d.style.position="absolute",d.style.magrin="0",d.style.top="25%",d.style.left=0,d.addEventListener("contextmenu",this.onContextMenu),n.style.position="relative",n.appendChild(d)}this.tr.insertBefore(h,this.tr.childNodes[this.vConditionsCount]),++this.vConditionsCount}addEmptyVerticalCondition(){var t=this.document.createElement("td");t.style.backgroundImage="url("+tt+")",t.style.backgroundSize="100% 100%",this.tr.appendChild(t)}getEmptyHorizontalCondition(){var t=this.document.createElement("td");return t.style.backgroundImage="url("+et+")",t.style.backgroundSize="100% 100%",t}addEmptyHorizontalCondition(){var t=this.getEmptyHorizontalCondition();t.style.backgroundColor="000000",this.hConditionsTable.rows[this.currentRow++].appendChild(t),this.currentRow=this.currentRow%7}onMouseDown(t){t.currentTarget.style.visibility="hidden",t.currentTarget.parent.dispatchEvent(new CustomEvent("conditionHidden",{detail:t.currentTarget}))}addHorizontalCondition(t,e,i,n,s){var r=this.document.createElement("table");r.style.borderCollapse="collapsed",r.parent=this,r.data={hasArrow:t,middleImageType:e,leftImgNum:i,middleImgNum:n,rightImgNum:s},r.data.type="horizontal",r.addEventListener("mousedown",this.onMouseDown);var a=this.document.createElement("tr"),o=this.document.createElement("img");o.src=U[Math.floor(i/10)][i%10],o.style.maxWidth="100%",o.addEventListener("contextmenu",this.onContextMenu);var h=this.document.createElement("img");h.src=U[Math.floor(s/10)][s%10],h.style.maxWidth="100%",h.addEventListener("contextmenu",this.onContextMenu);var d=this.document.createElement("img");d.src=2==e?X:U[Math.floor(n/10)][n%10],d.style.maxWidth="100%",d.addEventListener("contextmenu",this.onContextMenu);var l=this.document.createElement("td");l.appendChild(o),a.appendChild(l);var m=this.document.createElement("td");if(m.appendChild(d),1==e){var c=this.document.createElement("img");c.src=Q,m.style.position="relative",c.style.position="absolute",c.style.width="100%",c.style.left=0,c.addEventListener("contextmenu",this.onContextMenu),m.appendChild(c)}if(a.appendChild(m),(m=this.document.createElement("td")).appendChild(h),a.appendChild(m),r.appendChild(a),t){var g=this.document.createElement("img");g.src=$,r.style.position="relative",g.style.position="absolute",g.style.width="100%",g.style.height="25%",g.style.left=0,g.style.top=0,g.addEventListener("contextmenu",this.onContextMenu),r.appendChild(g)}(m=this.document.createElement("td")).style.backgroundColor="000000",m.style.backgroundImage="url("+et+")",m.style.backgroundSize="100% 100%",m.appendChild(r);var u=Math.floor(this.hConditionsCount/7);if(2==u)this.hConditionsTable.rows[this.hConditionsCount%7].appendChild(m);else{var C=this.hConditionsTable.rows[this.hConditionsCount%7].childNodes[u];this.hConditionsTable.rows[this.hConditionsCount%7].insertBefore(m,C)}++this.currentRow,this.currentRow%=7,++this.hConditionsCount}}class nt extends it{addCondition(t){if("horizontal"==t.type){var e=this.hConditionsTable.rows[this.hConditionsCount%7].lastChild;this.hConditionsTable.rows[this.hConditionsCount%7].removeChild(e),this.addHorizontalCondition(t.hasArrow,t.middleImageType,t.leftImgNum,t.middleImgNum,t.rightImgNum)}else"vertical"==t.type&&(this.tr.removeChild(this.tr.lastChild),this.addVerticalCondition(t.isRegular,t.topImageNum,t.bottomImageNum))}removeCondition(t){if("horizontal"==t.type){--this.hConditionsCount;var e=this.hConditionsTable.rows[this.hConditionsCount%7].childNodes[Math.floor(this.hConditionsCount/7)];this.hConditionsTable.rows[this.hConditionsCount%7].removeChild(e),this.hConditionsTable.rows[this.hConditionsCount%7].appendChild(this.getEmptyHorizontalCondition())}else"vertical"==t.type&&(this.tr.removeChild(this.tr.childNodes[this.vConditionsCount-1]),--this.vConditionsCount,this.addEmptyVerticalCondition())}onMouseDown(t){}}window.MathUtil=new class{seedRandom(t){this.seed=t}random(t){return this.seed=(9301*this.seed+49297)%233280,this.seed/233280*t}},(new class{constructor(){var t=new r;this.puzzleNumber=1e4*Math.random(),this.gameData=t.generateGame(this.puzzleNumber),this.VERTICAL_CONDITIONS_COUNT=18,this.HORIZONTAL_CONDITIONS_COUNT=21}render(t,e){this.parent=t,this.actions=[],this.selectedImagesCount=0,e.body.style.backgroundColor="01aaff";var i=e.createElement("div");i.style.position="absolute",i.style.left=0,i.style.top=0,this.mainBoard=new K,this.mainBoard.render(i,e,this);var n=e.createElement("div");n.style.maxWidth="50%",n.style.padding="5px 0px";var s=e.createElement("button");s.innerHTML="Full Screen",s.addEventListener("click",this.onFullScreenClick),n.appendChild(s);var r=e.createElement("button");r.innerHTML="Undo",r.game=this,r.addEventListener("click",this.onUndoClick),n.appendChild(r);var a=e.createElement("button");a.innerHTML="Other clues",a.game=this,a.addEventListener("click",this.onOtherCluesClick),n.appendChild(a),this.timerDiv=e.createElement("button"),this.timerDiv.style.cssFloat="right",this.timerDiv.id="timerDiv",this.timerDiv.innerHTML="TIME: 00:00:00",n.appendChild(this.timerDiv),this.timerDiv.startTime=new Date,this.timer=setInterval(this.timerHandler,1e3),i.appendChild(n),t.appendChild(i),this.conditionsDiv=e.createElement("div"),this.conditions=new it,this.conditions.render(this.conditionsDiv,e,this),this.conditions.addEventListener("conditionHidden",this.onConditionHidden),t.appendChild(this.conditionsDiv),this.otherCluesDiv=e.createElement("div"),this.otherClues=new nt,this.otherClues.render(this.otherCluesDiv,e,this),this.otherCluesDiv.style.visibility="hidden",t.appendChild(this.otherCluesDiv);var o=this.gameData.getItemsOpenedOnStart();this.selectedImagesCount=o.length;for(var h=this.gameData.getSolution(),d=0;d<o.length;++d){var l=o[d][0],m=o[d][1];this.mainBoard.selectImage(h[l][m],m)}this.mainBoard.addEventListener("imageSelected",this.onImageSelected),this.mainBoard.addEventListener("imageHidden",this.addAction),this.addVerticalConditions(),this.addHorizontalConditions()}onFullScreenClick(){var t=document.documentElement;t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen()}onImageSelected(t){this.game.actions.push(t),++this.game.selectedImagesCount,this.game.checkSolution()}onConditionHidden(t){this.game.actions.push(t),this.game.otherClues.addCondition(t.detail.data)}onUndoClick(){if(this.game.actions.length>0){var t=this.game.actions.pop();switch(t.type){case"imageSelected":this.game.mainBoard.unselectImage(t),--this.game.selectedImagesCount;break;case"imageHidden":t.detail.style.visibility="visible";break;case"conditionHidden":this.game.otherClues.removeCondition(t.detail.data),t.detail.style.visibility="inherit"}}}addAction(t){this.game.actions.push(t)}onOtherCluesClick(){"hidden"==this.game.otherCluesDiv.style.visibility?(this.game.conditionsDiv.style.visibility="hidden",this.game.otherCluesDiv.style.visibility="visible"):(this.game.conditionsDiv.style.visibility="visible",this.game.otherCluesDiv.style.visibility="hidden")}addVerticalConditions(){for(var t=this.gameData.getVerticalConditions(),e=0;e<t.length;++e){var i=t[e];this.conditions.addVerticalCondition(0==i[0],i[1],i[2]),this.otherClues.addEmptyVerticalCondition()}for(var n=t.length;n<this.VERTICAL_CONDITIONS_COUNT;++n)this.conditions.addEmptyVerticalCondition(),this.otherClues.addEmptyVerticalCondition()}addHorizontalConditions(){for(var t=this.gameData.getHorizontalCondition(),e=0;e<t.length;++e){var i=t[e];this.conditions.addHorizontalCondition(1==i[0],i[1],i[2],i[3],i[4],e),this.otherClues.addEmptyHorizontalCondition()}for(var n=t.length;n<this.HORIZONTAL_CONDITIONS_COUNT;++n)this.conditions.addEmptyHorizontalCondition(),this.otherClues.addEmptyHorizontalCondition()}checkSolution(){if(!(this.selectedImagesCount<36)){for(var t=!0,e=0;e<6;++e)for(var i=0;i<6;++i)if(this.gameData.getSolution()[e][i]!=this.mainBoard.getSelectedImageNum(e,i)){t=!1;break}t?(clearInterval(this.timer),alert("Elementary, Watson!")):alert("Not reall. Try again.")}}timerHandler(){var t=(new Date-document.getElementById("timerDiv").startTime)/1e3,e=Math.floor(t/3600),i=Math.floor((t-3600*e)/60),n=Math.floor(t%60);e<10&&(e="0"+e),i<10&&(i="0"+i),n<10&&(n="0"+n),this.timerDiv.innerHTML="TIME: "+e+":"+i+":"+n}}).render(document.getElementsByTagName("BODY")[0],document)}]);